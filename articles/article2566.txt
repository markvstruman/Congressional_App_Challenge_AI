CNN —

Senior lawmakers in both parties early Tuesday unveiled their long-awaited $1.7 trillion government funding package, a move that leaves Congress with little time to review a massive bill before they are forced to cast a vote to approve it or risk a government shutdown.

The expectation on Capitol Hill is that a shutdown will be avoided, but congressional leaders have little room for error given the tight timeline they are facing. Government funding is set to expire on Friday at midnight.

The massive spending bill, known on Capitol Hill as an omnibus, would fund critical government operations across federal agencies for fiscal year 2023. It provides $772.5 billion for non-defense, domestic programs and $858 billion in defense funding. It also includes $44.9 billion in emergency assistance to Ukraine and NATO allies and roughly $40 billion in natural disaster aid, according to a release from the Senate Appropriations Committee.

The legislative text, which runs more than 4,000 pages, was released in the middle of the night – at around 1:30 a.m. ET on Tuesday – leaving little time for rank-and-file lawmakers, and the public, to review its contents before Congress plans to vote to pass it.

In a partisan political environment where bipartisan action often does not happen without immense time pressure, it has become the norm in recent years on Capitol Hill to release massive funding bills at the eleventh-hour and then proceed to jam them through both chambers. That has led to criticism and complaints from lawmakers who say the process is rushed and secretive and does not operate with the transparency it should.

Senate leaders are aiming to take procedural steps to pass the bill by Thursday and then send it to the House, where it is expected to be adopted, and then to President Joe Biden for his signature before the Friday deadline.

Other provisions in the bill, according to Senate sources, include an overhaul of the 1887 Electoral Count Act and the Secure Act 2.0, a package aimed at making it easier to save for retirement. The bill also includes a measure to ban TikTok from federal devices.

Sens. Susan Collins, a Republican from Maine, and Joe Manchin, a West Virginia Democrat, formally announced on Tuesday the inclusion of the Electoral Count Act reforms.

“We are pleased that our legislation has been included in the omnibus appropriations bill and are grateful to have the support of so many of our colleagues. We look forward to seeing this bill signed into law,” the senators said in a joint statement.

The spending bill is the product of lengthy negotiations between top congressional Democrats and Republicans. And negotiators are now calling for swift passage of the measure.

“The choice is clear. We can either do our jobs and fund the government, or we can abandon our responsibilities without a real path forward,” Senate Appropriations Chairman Patrick Leahy, a Vermont Democrat, said in a statement. “Passing this bipartisan, bicameral, omnibus appropriations bill is undoubtedly in the interest of the American people.”

Republicans are highlighting the money secured for defense following a dispute between the two parties over how much money should be spent on non-defense, domestic priorities.

GOP Sen. Richard Shelby, the top Republican on the Senate Appropriations Committee, said in a statement, “Since day one, I have insisted on increasing defense funding well above the President’s request without similar increases in wasteful liberal non-defense spending.”

“This process was far from perfect, but ultimately it allowed Republican redlines to be adhered to and because of that I will urge my colleagues to support this package. We need to do our job and fund the government,” he said.

Several key measures were not included in the plan. Legislation to allow cannabis companies to bank their cash reserves – known as the Safe Banking Act – was not included in the final bill, nor were scores of corporate and individual tax breaks, such as an extension of the expanded child tax credit, the sources said.

There was also no final resolution on where the new FBI headquarters will be located, a major point of contention as lawmakers from Maryland – namely House Majority Leader Steny Hoyer – pushed to bring the law enforcement agency into their state. In a deal worked through by Senate Majority Leader Chuck Schumer, the General Services Administration would be required to conduct “separate and detailed consultations” with Maryland and Virginia representatives about potential sites in each of the states, according to a Senate Democratic aide.